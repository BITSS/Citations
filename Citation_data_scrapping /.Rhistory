, port = 4445L
, browserName = "safari")
remDr$open()
remDr <- remoteDriver(browserName = "safari")
remDr$open()
browserName = "safari")
remDr <- remoteDriver()
remDr$open()
remDr <- remoteDriver(remoteServerAddr = "localhost"
, port = 4445L
, browserName = "safari")
remDr$open()
remDr <- remoteDriver(remoteServerAddr = "localhost"
, port = 4445L
, browserName = "safari")
remDr$open()
require(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost"
, port = 4445L
, browserName = "safari")
remDr$open()
remDr <- remoteDriver(browserName = "safari")
remDr$open()
remDr <- remoteDriver(browserName = "safari")
remDr$open()
require(RSelenium)
remDr <- remoteDriver(port=5556)
remDr$open()
remDr$open()
remDr <- remoteDriver(port=5556)
remDr$open()
remDr$navigate("http://www.webofknowledge.com")
inputEle<-remDr$findElement(using='class', value = 'search-criticia-input')
inputEle<-remDr$findElement(using='id', value = 'container(input1)')
inputEle$getElementAttribute('class')
inputEle$getElementAttribute('type')
inputEle<-remDr$findElement(using='id', value = 'value(input1)')
inputEle$getElementAttribute('type')
inputEle$getElementAttribute('class')
inputEle$sendKeysToElement(list('Smith'))
inputEle$sendKeysToElement(list('David'))
inputEle$sendKeysToElement(list('David'),key="enter")
inputEle$sendKeysToElement(list('David',key="enter"))
dropEle <- remDr$findElement(using='id', value= 's2id_select1')
remDr$switchToFrame(dropEle)
# change audi to whatever your option value is
option <- remDr$findElement(using = 'xpath', "//*/option[@value = 'DOI']")
option$clickElement()
option <- remDr$findElement(using = 'id', "//*/select2-chosen-1[@value = 'DOI']")
option$clickElement()
dropEle.type()
dropEle$getElementAttribute('type')
dropEle$getElementAttribute('class')
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
dropEle$getElementAttribute('class')
dropEle$clickElement()
doiEle <- dropEle$findElement(using='id', value='select2-result-label-255')
doiEle$clickElement()
doiEle <- remDr$findElement(using='id', value='select2-result-label-255')
doiEle$clickElement()
doiEle <- remDr$findElement(using='id', value='select2-result-label-273')
doiEle$clickElement()
dropEle$getElementAttribute('class')
remDr$sendKeysToActiveElement(list(key = 'tab'))
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
dropEle$getElementAttribute('class')
dropEle$clickElement()
remDr$sendKeysToElement(list(key = 'tab'))
dropEle$sendKeysToElement(list(key = 'tab'))
dropEle$sendKeysToElement(list(key = 'tab'))
dropEle$clickElement()
dropEle$sendKeysToActiveElement(list(key = 'tab'))
dropEle$sendKeysToElement(list(key = 'down'))
dropEle$getElementAttribute('class')
dropEle <- remDr$findElement(using='id', value= 'select2-result-1')
chosen
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
dropEle$getElementAttribute('class')
dropEle$clickElement()
dropEle$clickElement()
doiEle <- dropEle$findElement(using='id', value='select2-result-1')
doiEle <- remDr$findElement(using='id', value='select2-result-1')
doiEle <- remDr$findElement(using='id', value='select2-results-1')
doiEle <- dropEle$findElement(using='id', value='select2-results-1')
doiEle <- dropEle$findElement(using='id', value='select2-result-label-273')
doiEle$findChildElement(using='id', value = 'select2-result-label-273')
doiEle <- dropEle$findElement(using='id', value='select2-result-1')
doiEle <- dropEle$findElement(using='id', value='select2-results-1')
doiEle$getElementAttribute('type')
c <= doiEle$findChildElement(using='id', value = 'select2-result-label-273')
doiEle
dropEle
doiEle <- remDr$findElement(using='id', value='select2-results-1')
doiEle
dropEle.selectByVisibleText("DOI")
doiEle <- remDr$findElement(using='class', value='select2-result-label')
doiEle$getElementAttribute('type')
doiEle
doiEle <- remDr$findElement(using='class', value='select2-match')
doiEle$getElementAttribute('type')
doiEle
doiEle.clickElement()
doiEle <- remDr$findElement(using='id', value='select2-result-label-273')
dropEle$clickElement()
doiEle<-remDr$findElement(using='id', value='select2-result-label-273')
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$clickElement()
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
inputEle$sendKeysToElement(list('DASDAS',key="enter"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "ENTER"))
dropEle$sendKeysToElement(list(key = "enter"))
inputEle <- remDr$findElement(using='id', value = 'value(input1)')
inputEle$getElementAttribute('class')
inputEle$sendKeysToElement(list('DASDAS',key="enter"))
resetEle <- remDr$findElement(using='id', value='resetForm')
resetEle$clickElement()
resetEle$getElementAttribute('type')
resetEle$getElementAttribute('class')
resetEle <- remDr$findElement(using='id', value='resetForm')
resetEle$getElementAttribute('class')
resetEle$clickElement()
clearEle <- remDr$findElement(using='id', value='clearIcon1')
resetEle$getElementAttribute('class')
clearEle$getElementAttribute('class')
clearEle$clickElement()
clearEle$clickElement()
inputEle$sendKeysToElement(list('10.1017/S0003055408080039',key="enter"))
inputEle <- remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list('10.1017/S0003055408080039',key="enter"))
citationEle <- remDr$findElement(using='class',value='search-results-data-cite' )
citationEle
citationEle.getText()
citationEle$getText()
citationEle$getElementText()
citationEle$getTitle()
result<-citationEle$getElementText()
result
typeof(result)
result[15:18]
unlist(result)
result<-unlist(citationEle$getElementText())
typeof(result)
as.numeric(gsub("([0-9]+).*$",result)
)
regmatches(result, regexpr("[[:digit:]]+", result))
result <- regmatches(result, regexpr("[[:digit:]]+", result))
result
remDr$navigate("http://www.webofknowledge.com")
clearEle <- remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
dropEle$getElementAttribute('class')
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
dropEle$getElementText()
chosen <- unlist(dropEle$getElementText())
chosen
chosen == "DOI"
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
chosen <- unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
chosen <- unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
chosen <- unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
inputEle <- remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list('10.1017/S0003055408080039',key="enter"))
# get citation number:
citationEle <- remDr$findElement(using='class',value='search-results-data-cite')
result<-unlist(citationEle$getElementText())
result <- regmatches(result, regexpr("[[:digit:]]+", result))
result
remDr$navigate("http://www.webofknowledge.com")
#clear:
clearEle <- remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
chosen <- unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
inputEle <- remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list('10.1017/S0003055408080039',key="enter"))
# get citation number:
citationEle <- remDr$findElement(using='class',value='search-results-data-cite')
result<-unlist(citationEle$getElementText())
result <- regmatches(result, regexpr("[[:digit:]]+", result))
result
remDr$navigate("http://www.webofknowledge.com")
clearEle <- remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
inputEle <- remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list('10.1017/S0003055408080039',key="enter"))
citationEle <- remDr$findElement(using='class',value='search-results-data-cite')
result<-unlist(citationEle$getElementText())
result <- regmatches(result, regexpr("[[:digit:]]+", result))
remDr$navigate("http://www.webofknowledge.com")
#clear:
clearEle <- remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
dropEle <- remDr$findElement(using='id', value= 'select2-chosen-1')
chosen <- unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
inputEle <- remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list('10.1017/S0003055408080155',key="enter"))
# get citation number:
citationEle <- remDr$findElement(using='class',value='search-results-data-cite')
result<-unlist(citationEle$getElementText())
result <- regmatches(result, regexpr("[[:digit:]]+", result))
result
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result<-unlist(citationEle$getElementText())
result <- regmatches(result, regexpr("[[:digit:]]+", result))
result
getwd()
setwd("Desktop/School/URAP/Citations/Citation_data_scrapping")
setwd("Desktop/School/URAP/Citations/Citation_data_scrapping/")
setwd("/Desktop/School/URAP/Citations/Citation_data_scrapping/")
setwd("Desktop/School/URAP/Citations/Citation_data_scrapping/")
getwd()
setwd("/Desktop/School/URAP")
setwd("~/Desktop/School/URAP/Citations/Citation_data_scrapping ")
ajps<-read.csv("ajps_citation.csv")
View(ajps)
ajps <- subset(ajps, citation=None)
ajps <- subset(ajps, citation=NA)
ajps <- subset(ajps, citation==NA)
ajps<-read.csv("ajps_citation.csv")
ajps <- subset(ajps, is.na(ajps$citation))
apsr <- read.csv("apsr_citation.csv")
apsr <- subset(apsr, is.na(apsr$citation))
aj_temp <- read.csv("ajps_article_coding_template.csv")
View(aj_temp)
ajps_new <- merge(ajps, aj_temp, all.x=TRUE)
View(ajps_new)
View(aj_temp)
View(ajps)
ajps$title<-None
ajps$title<-NULL
ajps_new <- merge(ajps, aj_temp, all.x=TRUE)
View(ajps_new)
ajps_new <- merge(aj_temp,ajps, all.x=TRUE)
View(ajps_new)
ajps<-read.csv("ajps_citation.csv")
ajps$title<-NULL
ajps_new <- merge(aj_temp,ajps, all.x=TRUE)
View(ajps_new)
ajps<-read.csv("ajps_citation.csv")
View(ajps)
aj_temp <- read.csv("ajps_article_coding_template.csv")
ajps_new <- merge(aj_temp,ajps, all.x=TRUE)
View(ajps_new)
ajps_new <- merge(ajps,aj_temp, all.x=TRUE)
View(ajps_new)
ajps<-read.csv("ajps_citation.csv")
ajps$title<-NULL
View(ajps)
ajps_new <- merge(ajps,aj_temp, all.x=TRUE)
View(ajps_new)
ajps_new <- merge(ajps,aj_temp, by=doi,all.y=TRUE)
ajps_new <- merge(ajps,aj_temp, by=ajps$doi,all.y=TRUE)
ajps_new <- merge(ajps,aj_temp, by.x=ajps$doi,all.y=TRUE)
ajps_new <- merge(ajps,aj_temp, by.x=ajps$doi,by.y=aj_temp$doi,all.y=TRUE)
ajps_new <- merge(ajps,aj_temp, by.x='doi',by.y='doi',all.y=TRUE)
View(ajps_new)
ajps_new <- subset(ajps_new, is.na(ajps_new$citation))
View(ajps_new)
test <- subset(ajps, is.na(ajps$citation))
View(test)
rm(test)
ajps<-read.csv("ajps_citation.csv")
ajps$title<-NULL
aj_temp <- read.csv("ajps_article_coding_template.csv")
View(aj_temp)
aj_temp <- aj_temp[, -c(5:7)]
View(ajps)
ajps <- merge(ajps,aj_temp, by.x='doi',by.y='doi')
View(aj_temp)
aj_temp <- read.csv("ajps_article_coding_template.csv")
aj_temp <- aj_temp[, -c(4:7)]
View(aj_temp)
ajps<-read.csv("ajps_citation.csv")
ajps$title<-NULL
ajps <- merge(ajps,aj_temp, by.x='doi',by.y='doi')
View(ajps)
ajps_na <- subset(ajps, is.na(ajps$citation))
apsr <- read.csv("apsr_citation.csv")
apsr$title <- NULL
ap_temp <- read.csv("apsr_article_coding_template.csv")
ap_temp<- ap_temp[,-c(4:7)]
View(ap_temp)
ap_temp<-ap_temp[,-1]
View(ap_temp)
ajps<-read.csv("ajps_citation.csv")
ajps$title<-NULL
aj_temp <- read.csv("ajps_article_coding_template.csv")
aj_temp <- aj_temp[, -c(4:7)]
aj_temp<-aj_temp[,-1]
ajps <- merge(ajps,aj_temp, by.x='doi',by.y='doi')
ajps_na <- subset(ajps, is.na(ajps$citation))
View(ajps_na)
apsr <- merge(apsr,ap_temp, by.x='doi',by.y='doi')
apsr_na <- subset(apsr, is.na(apsr$citation))
library(RSelenium)
remDr <- remoteDriver(port=4444)
remDr$open()
search <- function(doi) {
#doi <- as.character(doi)
remDr$navigate("http://www.webofknowledge.com")
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
dropEle = remDr$findElement(using='id', value= 'select2-chosen-1')
chosen = unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# get citation number:
Sys.sleep(5)
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
aj_output <- lapply(ajps_na$title, search)
aj_output <- lapply(ajps_na$title, search)
search <- function(doi) {
#doi <- as.character(doi)
remDr$navigate("http://www.webofknowledge.com")
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
dropEle = remDr$findElement(using='id', value= 'select2-chosen-1')
chosen = unlist(dropEle$getElementText())
if (chosen != 'Title') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# get citation number:
Sys.sleep(5)
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
aj_output <- lapply(ajps_na$title, search)
aj_output <- lapply(ajps_na$title, search)
ajps_na$citatio2<-aj_output
View(ajps_na)
ajps_na <- data.frame(lapply(ajps_na, as.character), stringsAsFactors=FALSE)
View(ajps_na)
ajps_new <- merge(ajps_na, ajps, all.x = TRUE)
View(ajps_new)
View(ajps)
ajps_new <- merge(ajps, ajps_na, all.x = TRUE)
View(ajps_new)
ajps_new$citation <- with(ajps_new, ifelse(is.na(citation2),
citation, citation2))
ajps_na$citatio2<-NULL
ajps_na$citation2<-aj_output
ajps_na <- data.frame(lapply(ajps_na, as.character), stringsAsFactors=FALSE)
ajps_new <- merge(ajps, ajps_na, all.x = TRUE)
ajps_new$citation <- with(ajps_new, ifelse(is.na(citation2),
citation, citation2))
ajps_new$citation2<-NULL
write.csv(ajps_new, file="ajps_2ndCheck.csv")
ajps_na<- subset(apsr_new, apsr_new$citation=="NA")
ajps_na<- subset(ajps_new, ajps_new$citation=="NA")
write.csv(ajps_new, file="ajps_handsearch.csv")
write.csv(ajps_na, file="ajps_handsearch.csv")
library(RSelenium)
apsr <- read.csv("apsr_citation.csv")
apsr$title <- NULL
ap_temp <- read.csv("apsr_article_coding_template.csv")
ap_temp<- ap_temp[,-c(4:7)]
ap_temp<-ap_temp[,-1]
apsr <- merge(apsr,ap_temp, by.x='doi',by.y='doi')
apsr_na <- subset(apsr, is.na(apsr$citation))
remDr <- remoteDriver(port=4444)
#remDr <- rd[["client"]]
remDr$open()
search <- function(doi) {
#doi <- as.character(doi)
remDr$navigate("http://www.webofknowledge.com")
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
dropEle = remDr$findElement(using='id', value= 'select2-chosen-1')
chosen = unlist(dropEle$getElementText())
if (chosen != 'Title') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# get citation number:
Sys.sleep(5)
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
ap_output <- lapply(apsr_na$title, search)
ap_output <- lapply(apsr_na$title, search)
apsr_na$citation2<-ap_output
apsr_na <- data.frame(lapply(apsr_na, as.character), stringsAsFactors=FALSE)
apsr_new <- merge(apsr, apsr_na, all.x = TRUE)
apsr_new$citation <- with(apsr_new, ifelse(is.na(citation2),
citation, citation2))
apsr_new$citation2<-NULL
apsr_na<- subset(apsr_new, apsr_new$citation=="NA")
write.csv(apsr_new, file="apsr_2ndCheck.csv")
write.csv(apsr_na, file="apsr_handsearch.csv")
