remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "doi"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter doi number in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
df$citation[df$doi == doi] <- result
return(df)
}
remDr <- remoteDriver(port=4444)
remDr$open()
remDr$navigate("http://www.webofknowledge.com")
df1 <- lapply(df$doi,df, search)
df1 <- lapply(c(df$doi,df), search)
View(df)
df1 <- lapply(c(df1,df1$doi), search)
df1 <- mapply(search, df1, df$doi)
View(df1)
df1$citation[ df1$doi =="10.1093/qje/121.4.1473" ]
df1$citation[ df1$doi =="10.1093/qje/121.4.1473" ] <- 5
View(df1)
df1$citation ='NA'
View(df1)
typeof(df1)
search <- function(df, doi) {
remDr$navigate("http://www.webofknowledge.com")
# click on the clear button in case there is previous search entry
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "doi"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter doi number in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
print(typeof(df))
df$citation[df$doi == doi] <- result
return(df)
}
df1 <- mapply(search, df1, df$doi)
df1 <- lapply(df1, search,df1$doi)
df1 <- lapply(df1, search, df1$doi)
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list("10.1093/qje/121.4.1437",key="enter"))
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
result
df1 <- lapply(df1, search, df1$doi)
errorDetails
errorDetails()
df1 <- lapply(df1, search, df1$doi)
checkForServer()
search <- function(doi) {
remDr$navigate("http://www.webofknowledge.com")
# click on the clear button in case there is previous search entry
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "doi"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter doi number in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
output <- lapply(df1$doi, search)
df1 <- lapply(df1$doi, search, df=df1)
View(df1)
View(df1)
df1<-df[1:5,]
typeof(df1)
dataframe(df1)
data.frame(df1)
df1<-data.frame(df1)
typeof(df1)
df1<-df[1:5,]
df1 <- mapply(search,df1$doi,  df=df1)
search <- function(doi) {
remDr$navigate("http://www.webofknowledge.com")
# click on the clear button in case there is previous search entry
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "doi"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter doi number in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
for (doi in df1$doi){
df1$citation[df1$doi == doi] <= search(doi)
}
View(df1)
View(df1)
for (doi in df1$doi){
citation = search(doi)
df1$citation[df1$doi == doi] = citation
}
View(df1)
drop(df1)
View(df1)
View(df1)
for (doi in df1$doi){
if (is.na(df1$citation[df1$doi == doi])){
citation = search(doi)
df1$citation[df1$doi == doi] = citation
}
}
View(df1)
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])){
citation = search(doi)
df$citation[df$doi == doi] = citation
}
}
View(df)
search <- function(doi) {
remDr$navigate("http://www.webofknowledge.com")
# click on the clear button in case there is previous search entry
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "doi"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'DOI') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter doi number in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result = NA
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
df[df=="NA"]<- NA
View(df)
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])){
citation = search(doi)
df$citation[df$doi == doi] = citation
}
}
df["checked"] <- NA
df<- read.csv('indexed_qje.csv')
df<- df[,c("doi","author","title")]
df["citation"] <- NA
df["checked"] <- NA
df["checked"] <- 0
View(df)
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
View(df)
df$checked[136:227]
df$checked[,136:227]
df$checked[136:371]<-0
View(df)
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
View(df)
drop(df1)
View(df1)
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
search_title <- function(title) {
remDr$navigate("http://www.webofknowledge.com")
# click on the clear button in case there is previous search entry
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "Title"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'Title') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter title in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(doi,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
drop(doi)
remove(doi)
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
search_title <- function(title) {
remDr$navigate("http://www.webofknowledge.com")
# click on the clear button in case there is previous search entry
clearEle = remDr$findElements(using='id', value='clearIcon1')
if (length(clearEle)<1){
remDr$navigate("http://www.webofknowledge.com")
}
clearEle = remDr$findElement(using='id', value='clearIcon1')
clearEle$clickElement()
# in dropdown menu for search criteria chose the element "Title"
dropEle = remDr$findElement(using='id', value= 'select2-select1-container')
chosen = unlist(dropEle$getElementText())
if (chosen != 'Title') {
dropEle$clickElement()
dropEle$sendKeysToElement(list(key = "down_arrow"))
dropEle$sendKeysToElement(list(key = "enter"))
}
# enter title in the input field
inputEle = remDr$findElement(using='id', value = 'value(input1)')
inputEle$sendKeysToElement(list(title,key="enter"))
# wait for 5 seconds to make sure that the page has fully loaded
Sys.sleep(5)
# get citation number:
citationEle <-remDr$findElements(using='class',value='search-results-data-cite')
if (length(citationEle)<1) {
result ='NA'
} else {
citationEle <-remDr$findElement(using='class',value='search-results-data-cite')
result =unlist(citationEle$getElementText())
result =regmatches(result, regexpr("[[:digit:]]+", result))
}
return(result)
}
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
View(df)
df[df$citation=="NA"]
df$citation[df$citation=="NA"]
df$citation[df$citation=="NA"] =NA
df$citation[df$citation=="NA"]
View(df)
write.csv(df, file="qje_citation.csv")
df<- read.csv('indexed_aer.csv')
df<- df[,c("doi","author","title")]
df["citation"] <- NA
df["checked"] <- 0
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
View(df)
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
View(df)
remDr <- remoteDriver(port=4444)
remDr$open()
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
View(df)
df$checked[3583:3592,]
df$checked[3583:3592]
df$checked[3583:3592]->0
df$checked[3583:3592]=0
df$checked[3583:3592]
for (doi in df$doi){
if (is.na(df$citation[df$doi == doi])
&& df$checked[df$doi == doi]==0){
citation = search(doi)
df$citation[df$doi == doi] = citation
df$checked[df$doi == doi] = 1
}
}
df1 <- subset(df, is.na(df$citation))
View(df1)
remDr <- remoteDriver(port=4444)
remDr$open()
remDr <- remoteDriver(port=4444)
remDr$open()
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
df1<- subset(df, is.na(df$citation))
for (title in df$title){
if (is.na(df$citation[df$title == title])
&& df$checked[df$title == title]==1){
citation = search_title(title)
df$citation[df$title == title] = citation
}
}
df1<- subset(df, is.na(df$citation))
View(df)
df$citation[df$citation =='NA']
df$citation[df$citation =='NA'] = NA
df1<- subset(df, is.na(df$citation))
write.csv(df, file="aer_citation.csv")
